// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id         String   @id
  email      String   @unique
  fullname   String
  password   String
  role       Role     @default(STUDENT)
  department String
  createdAt  DateTime @default(now())
  Courses    Course[]

  Profile Profile?
}

model Profile {
  id                   String        @id
  profile              User          @relation(fields: [id], references: [id], onDelete: Cascade)
  UserDocument         UserDocument?
  studentId            String
  title                String?
  firstname            String?
  lastname             String?
  address              String        @db.MediumText
  phoneNumber          String?
  email                String?
  carrer               String?
  carrerPosition       String?
  carrerAddress        String?
  educationExpenseFrom String?
  income               Int?          @default(0)
}

model UserDocument {
  userId         String  @id
  userDocuemntId Profile @relation(fields: [userId], references: [id])
  picturePath    String
  transcriptPath String
  classTablePath String
  bookBankPath   String
}

model SystemStatus {
  id        Int      @id() @default(autoincrement())
  openDate  DateTime
  closeDate DateTime
}

enum Role {
  SUPERADMIN
  ADMIN
  PROFESSOR
  STUDENT
}

model Course {
  subjectId   String  @id
  professorId String?
  professor   User?   @relation(fields: [professorId], references: [id])
  nameEng     String
  nameThai    String
  credit      String
  description String? @db.Text
}
